function EvDa(p){function e(a,b,d){return k(arguments)==1?_.isObject(a)?(g(a,function(b,c){a[c]=e(c,b,d)}),a):c[a]:e[_.isFunction(b)?j:"set"](a,b,d)}function l(a){g(a.$,function(b){d[b]=_.without(d[b],a)})}function i(a,b){f[a]&&(f[a](),f[a]=0);return b?a in c?b(c[a]):e(a,b,q):a in c}var g=_.each,h=_.extend,k=_.size,j="on",q={once:1},c=p||{},f={},d={};g([j,"after","test"],function(a){e[a]=function(b,c,e){(c.$||(c.$=[])).push(a+b);(d[a+b]||(d[a+b]=[])).push(c);return h(c,e)}});return h(e,{db:c,events:d,
unset:function(a){delete c[a]},del:l,isset:i,setter:function(a,b){f[a]=b;d["on"+a]&&i(a)},set:function(a,b,f,i){var h="test"+a,m=k(d[h]),n,o={meta:f||{},old:c[a],key:a,done:function(c){n|=c===!1;--m||n||e.set(a,b,f,1)}};m&&!i?g(d[h],function(a){a(b,o)}):(c[a]=b,g((d[j+a]||[]).concat(d["after"+a]||[]),function(a){a(b,o);a.once&&l(a)}));return b}})};
